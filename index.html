<!DOCTYPE html>

<html>
    
    <head>
        
        <link rel="stylesheet" href="main.css">

        
    </head>
    
    <body>
        <div class="scroll-snap-box">
            <header>
                <div class="scroll-snap1 section">
                    <p style="position: fixed" id="demo"></p>

                    <div class="tribar">
                        <img class="tribar-items z-0" id="left" src="img/tribar_left.png">
                        <img class="tribar-items z-1" id="right" src="img/tribar_right.png">
                        <img class="tribar-items z-2" id="bottom" src="img/tribar_bottom.png">
                    </div>
                </div>
            </header>
            <section>
                <div class="scroll-snap1 section">
                    <br>
                    scroll
                </div>
            </section>
        </div>
        
        
        <div style="height: 100vh">
            scroll
        </div>

        
    </body>
    
    
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script>
        $(window).scroll(function() {
        var phase = 0.16;
        var theta = ($(window).scrollTop() / window.innerHeight);
        var theta2 = theta - phase;
        var height_fix = 821 / window.innerHeight
            
        
        if (theta < phase) {
            $('#left').css({ 
                marginLeft: - theta * 173 * 3.3 , 
                marginTop: - theta * 100 * 5, 
                transform: 'rotate(-' + Math.min(theta * 120 , 120) + 'deg)' 
            });
            $('#right').css({ 
                marginLeft: theta * 100 * 5, 
                marginTop: - theta * 173 * 3,
                transform: 'rotate(' + Math.min(theta * 120, 120) + 'deg)' 
            });
            $('#bottom').css({ 
                marginLeft: theta * 100 * 2, 
                marginTop: theta * 173 * 2,
                transform: 'rotate(' + Math.min(theta * 0, 120) + 'deg)' 
            });
        }
        else {
            $('#left').css({ 
                marginLeft: - Math.min(theta * 173 * 3.3, 400 / height_fix),
                marginTop: - Math.min(theta * 100 * 5, 470 / height_fix),
                transform: 'rotate(-' + Math.min(theta * 120 * 1.1 * height_fix, 120) + 'deg)' 
            });
            $('#right').css({ 
                marginLeft: Math.min(theta * 100 * 5, 400 / height_fix), 
                marginTop: - Math.min(theta * 173 * 3, 465 / height_fix),
                transform: 'rotate(' + Math.min(theta * 120 * height_fix, 120) + 'deg)' 
            });
            $('#bottom').css({ 
                marginLeft: - Math.min(theta2 * 40  - phase * 100 * 2, 0),
                marginTop: - Math.min(theta2 * 173 * 4 - phase * 173 * 2, 515 / height_fix),
                transform: 'rotate(' + Math.min(theta * 0, 120) + 'deg)' 
            });
        }
        document.getElementById("demo").innerHTML = $(window).scrollTop() + "   ;   " + window.innerHeight + "   ;   " + theta/2.0944*Math.PI + "   ;   " + Math.sin(theta/2.0944*Math.PI) + "   ;   " + height_fix  ;
        });
    </script>
     
    
    <script>
        (function($) {
          var selector = ".section";

          var $slides = $(selector);

          var currentSlide = 0;
          var isAnimating = false;

          var stopAnimation = function() {
            setTimeout(function() {
              isAnimating = false;
            }, 300);
          };

          var bottomIsReached = function($elem) {
            var rect = $elem[0].getBoundingClientRect();
            return rect.bottom <= $(window).height();
          };

          var topIsReached = function($elem) {
            var rect = $elem[0].getBoundingClientRect();
            return rect.top >= 0;
          };

          document.addEventListener(
            "wheel",
            function(event) {
              var $currentSlide = $($slides[currentSlide]);

              if (isAnimating) {
                event.preventDefault();
                return;
              }

              var direction = -event.deltaY;

              if (direction < 0) {
                // next
                if (currentSlide + 1 >= $slides.length) return;
                if (!bottomIsReached($currentSlide)) return;
                event.preventDefault();
                currentSlide++;
                var $slide = $($slides[currentSlide]);
                var offsetTop = $slide.offset().top;
                isAnimating = true;
                $("html, body").animate(
                  {
                    scrollTop: offsetTop
                  },
                  1000,
                  stopAnimation
                );
              } else {
                // back
                if (currentSlide - 1 < 0) return;
                if (!topIsReached($currentSlide)) return;
                event.preventDefault();
                currentSlide--;
                var $slide = $($slides[currentSlide]);
                var offsetTop = $slide.offset().top;
                isAnimating = true;
                $("html, body").animate(
                  {
                    scrollTop: offsetTop
                  },
                  1000,
                  stopAnimation
                );
              }
            },
            { passive: false }
          );
        })(jQuery);

    </script>
    
    
</html>


                    